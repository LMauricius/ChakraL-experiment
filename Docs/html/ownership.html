
<!doctype html>
<html>
    <head>
        <title>ownership</title>
        <link rel="stylesheet" href="style.css">
        <link rel="stylesheet" href="syntax_style.css">
    </head>

    <body>
        <div class="wrapper">
            <div class="sidebar">
                <div class="tableofcontents">
                    <p class="tableofcontents_title">Contents</p>
                            <li><a href="introduction.html">1&nbspIntroduction</a>
        <ul>
            <li><a href="how_to_read_the_documentation.html">1&nbspHow to read the documentation</a>
            </li>
            <li><a href="language_goals.html">2&nbspLanguage goals</a>
            </li>
            <li><a href="file_format.html">3&nbspFile format</a>
            </li>
            <li><a href="module_system.html">4&nbspModule system</a>
            </li>
        </ul>
        </li>
        <li>2&nbspBasic concepts
        <ul>
            <li><a href="context.html">1&nbspContext</a>
            </li>
            <li><a href="value.html">2&nbspValue</a>
            </li>
            <li><a href="trait_system.html">3&nbspTrait system</a>
            </li>
        </ul>
        </li>
        <li>3&nbspLanguage features
        <ul>
            <li>1&nbspStatements
            <ul>
                <li><a href="using_statement.html">1&nbspusing statement</a>
                </li>
                <li><a href="if_statement.html">2&nbspif statement</a>
                </li>
                <li><a href="with_statement.html">3&nbspwith statement</a>
                </li>
            </ul>
            </li>
            <li><a href="expressions.html">2&nbspExpressions</a>
            <ul>
                <li><a href="module_expression.html">1&nbspmodule expression</a>
                </li>
                <li><a href="operators.html">2&nbspOperators</a>
                <ul>
                    <li><a href="math_operators.html">1&nbspMath operators</a>
                    </li>
                    <li><a href="comparison_operators.html">2&nbspComparison operators</a>
                    </li>
                    <li><a href="logical_operators.html">3&nbspLogical operators</a>
                    </li>
                    <li><a href="operator_new.html">4&nbspOperator new</a>
                    </li>
                    <li><a href="operator_as.html">5&nbspOperator as</a>
                    </li>
                    <li><a href="context_operators.html">6&nbspContext operators</a>
                    </li>
                </ul>
                </li>
            </ul>
            </li>
            <li><a href="value_qualifiers.html">3&nbspValue qualifiers</a>
            <ul>
                <li><b>1 Ownership</b>
                </li>
            </ul>
            </li>
        </ul>
        </li>
        <li>4&nbspStandard library
        </li>

                </div>
            </div>
            <div class="main">
                <div class="pagecontent">
                    <h1 id="ownership">Ownership</h1>
<p>While the data context can have many references, it can only have a single owner value. It is modified by the <code>own</code> and <code>ref</code> keywords</p>
<h2 id="owner">Owner</h2>
<p>The owner can be seen as a ‘main’ variable of some data. When data is assigned to an owner value, the new owner <em>takes</em> the ownership from the old one. That makes the old value <em>uninitialized</em>, which means it can’t be used in an expression until it gets assigned with new data.</p>
<div class="sourceCode" id="cb1" data-caption="Ownership reassignment example"><pre class="sourceCode chakral"><code class="sourceCode chakral"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a>read, write <span class="cf">with</span> stream <span class="op">=</span> console stl:</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true"></a>    a: own <span class="op">=</span> <span class="dv">30</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true"></a>    write a <span class="co">**prints &#39;30&#39;</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true"></a>    b: own <span class="op">=</span> a</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true"></a>    write b <span class="co">**prints &#39;30&#39;</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true"></a>    <span class="co">**ERROR: using an unitialized value</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true"></a>    <span class="co">**(Uncomment the line below to see the error)</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true"></a>    <span class="co">**write a</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true"></a>    a <span class="op">=</span> <span class="dv">50</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true"></a>    <span class="co">**OK: &#39;a&#39; has been assigned with new data</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true"></a>    write a <span class="co">**prints &#39;50&#39;</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true"></a></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true"></a><span class="cf">ok</span>  </span></code></pre></div>
<p>As <em>owner</em> is the default value qualifier, the <code class="sourceCode chakral">own</code> qualifier can be skipped.</p>
<div class="sourceCode" id="cb2" data-caption="Ownership reassignment example (without manual qualifiers)"><pre class="sourceCode chakral"><code class="sourceCode chakral"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a>read, write <span class="cf">with</span> stream <span class="op">=</span> console stl:</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true"></a>    a <span class="op">=</span> <span class="dv">30</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true"></a>    write a <span class="co">**prints &#39;30&#39;</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true"></a>    b <span class="op">=</span> a</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true"></a>    write b <span class="co">**prints &#39;30&#39;</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true"></a></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true"></a>    <span class="co">**ERROR: using an unitialized value</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true"></a>    <span class="co">**(Uncomment the line below to see the error)</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true"></a>    <span class="co">**write a</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true"></a></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true"></a>    a <span class="op">=</span> <span class="dv">50</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true"></a>    <span class="co">**OK: &#39;a&#39; has been assigned with new data</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true"></a>    write a <span class="co">**prints &#39;50&#39;</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true"></a></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true"></a><span class="cf">ok</span>  </span></code></pre></div>
<p>If the new owner value has a shorter lifespan than the old one, it will take the ownership only <em>temporarily</em>. Such temporary ownership is called <em>borrowing</em>. The data is borrowed until its new value’s lifespan ends, and then its ownership gets returned to the first old owner who is still alive.</p>
<div class="sourceCode" id="cb3" data-caption="Ownership borrowing example"><pre class="sourceCode chakral"><code class="sourceCode chakral"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true"></a>read, write <span class="cf">with</span> stream <span class="op">=</span> console stl:</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true"></a>    <span class="co">**The program reads a starting integer.</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true"></a>    <span class="co">**If the starting integer is positive, then it continues reading integers</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true"></a>    <span class="co">**until &#39;0&#39; is entered. It sums all integers and prints the sum after each</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true"></a>    <span class="co">**number is entered. After &#39;0&#39; is entered, it prints the starting number.</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true"></a>    <span class="co">**start of &#39;starting&#39; variable&#39;s lifespan</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true"></a>    starting: own <span class="op">=</span> read Integer</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true"></a>    write starting</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true"></a></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true"></a>    <span class="cf">if</span> starting <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true"></a>        <span class="co">**start of &#39;sum&#39; variable&#39;s lifespan</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true"></a>        sum: own <span class="op">=</span> starting <span class="co">**takes ownership from &#39;starting&#39;</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true"></a></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true"></a>        a: own <span class="op">=</span> read Integer</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true"></a>        <span class="cf">while</span> a <span class="op">!=</span> <span class="dv">0</span>:</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true"></a>            sum <span class="op">+=</span> a <span class="co">**adds entered number to the sum</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true"></a>            print sum</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true"></a>            a <span class="op">=</span> read Integer <span class="co">**reads next number</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true"></a>        <span class="cf">ok</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true"></a></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true"></a>        <span class="co">**ERROR: using an unitialized value (&#39;sum&#39; could still own the data)</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true"></a>        <span class="co">**(Uncomment the line below to see the error)</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true"></a>        <span class="co">**write starting</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true"></a></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true"></a>        <span class="co">**end of &#39;sum&#39; variable&#39;s lifespan</span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true"></a>    <span class="cf">ok</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true"></a></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true"></a>    <span class="co">**OK: &#39;starting&#39; has its ownership returned</span></span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true"></a>    write starting</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true"></a></span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true"></a>    <span class="co">**end of &#39;starting&#39; variable&#39;s lifespan</span></span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true"></a><span class="cf">ok</span>  </span></code></pre></div>

                </div>
            </div>
        </div>
    </body>
</html>